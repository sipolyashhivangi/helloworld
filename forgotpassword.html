<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>FlexScore - Recover Password
        </title>
        <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
        <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />                  
        <meta name="description" content="FlexScore gives you total financial clarity wrapped up in a single score. It's fast, free, and even a little fun.">
        <meta name="author" content="FlexScore">
        <meta name="keywords" content="">
        <meta property="og:title" content="FlexScore - Recover Password">
        <meta property="og:url" content="https://www.flexscore.com/forgotpassword">
        <meta property="og:locale" content="en_US">
        <meta property="og:description" content="FlexScore gives you total financial clarity wrapped up in a single score. It's fast, free, and even a little fun.">
        <meta property="og:image" content="https://www.flexscore.com/ui/images/home_laptop.png">
        <meta content="u3kX0jqV2_YEhCCIzKks2-P3Ws45R2ESrSsLQkRCiaQ" name="google-site-verification">
        <meta content="xZIdeyYAE_R97c0H6OGvkHeVWEI" name="alexaVerifyID">
        <meta name="msvalidate.01" content="1967933DCC3E8DF336994671EAAE77FD" />                 
        <!-- Le styles -->
        <link href="./ui/css/bootstrap/bootstrap.css" rel="stylesheet">
        <style type="text/css">body {padding-top: 60px;padding-bottom: 40px;}
        </style>
        <link rel="stylesheet" href="./ui/css/fonts.css" type="text/css">
        <link rel="stylesheet" href="./ui/css/bootstrap/flexscore.css?v=2" type="text/css" media="screen">
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements --> 
        <!--[if lt IE 9]>
                <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
            <![endif]-->
        <!-- Fav and touch icons -->
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
        <link rel="shortcut icon" href="./ui/images/favicon.png">

    </head>
    <body id="body">
        <input type="hidden" id="currentPage" value="forgotpassword">
        <div class="container col750" >
            <div style="padding:0px 0px 5px 5px;width:160px;font-size:0.9em">
                <a href="./">
                    <img width="160" alt="FlexScore Logo" src="./ui/images/logo-color-trans.png" style="width:160px" /></a>
                <br>
                <div class="clearOnly"></div>
            </div>
            <!-- TABBED CONTENT -->
            <div id="signIn" class="row-fluid">
                <div class="content tab-content">
                    <!-- SIGN IN TAB -->
                    <div class="tab-pane fade active in" id="loginUser">

                        <form class="form-horizontal">
                            <!-- SIGN IN TAB -->
                            <div class="signupTitleArea">
                                <h1>Recover Password</h1>
                                <p style="margin:1em 0;padding:0px 10px" id="forgotInstructions">Please enter the email address you used to sign up for FlexScore.  This allows for us to verify you as a user and send a password reset link directly to that inbox.</p>
                            </div>
                            <div class="clearOnly">&nbsp;</div>
                            <div class="control-group" id="emailGroup">
                                <label class="signupFormLabel control-label" for="inputEmail"><strong>Email Address</strong>
                                </label>
                                <div id="usernamediv" class="controls">
                                    <input type="text" id="username" placeholder="Email">
                                    <!-- error tooltip -->
                                    <div id="usernamebubble" class="errorBubble hdn">
                                        <div class="inside">
                                            <p id="usernameerror">Invalid Email Address</p>
                                            <div class="point">
                                            </div>
                                        </div>
                                    </div>
                                    <!-- end error tooltip -->
                                </div>
                            </div>
                            <div class="control-group">
                                <div id="forgotLinks" class="controls">
                                    <button id="forgotButton" type="button" class="simpleGreenCTAButton">Send Email
                                    </button>&nbsp;<a class="cancelPopup" href="#"><strong>Cancel</strong></a>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="clearEverything">
                </div>
            </div>
            <div class="clearEverything">&nbsp;
            </div>
            <!-- END TABBED CONTENT -->
            <div id="footerSignup">
                <div>
                    <div class="secureGuarantee floatL">
                    </div>
                    <div class="floatL" style="width:90%">
                        <strong>Secure Guarantee</strong><br />FlexScore is fully-equipped with 256-bit SSL encryption. That's the same level of security your bank or broker uses.
                    </div>
                    <div class="clearOnly"></div>
                </div>
                <div>
                    <a title="Click to Verify - This site has chosen a VeriSign SSL Certificate to improve Web site security" class="verisignSSL" href="https://sealinfo.verisign.com/splash?form_file=fdf/splash.fdf&amp;dn=www.flexscore.COM&amp;lang=en" target="_blank" style>
                        <img width="125" src="./ui/images/norton.png" alt="Verisign SSL Certificate" style="width:125px" />
                    </a>
                    &nbsp;
                    <a target="_blank" href="https://www2.mcafeesecure.com/verify?host=www.flexscore.com">
                        <img class="mfes-trustmark" style="border:0" src="//cdn.ywxi.net/meter/www.flexscore.com/101.gif" width="125" height="55" title="McAfee SECURE sites help keep you safe from identity theft, credit card fraud, spyware, spam, viruses and online scams" alt="McAfee SECURE sites help keep you safe from identity theft, credit card fraud, spyware, spam, viruses and online scams" oncontextmenu="alert('Copying Prohibited by Law - McAfee Secure is a Trademark of McAfee, Inc.'); return false;">
                    </a>
                </div>
            </div>
        </div>
        <br>
        <div class="slider">
        </div>

        <!-- Le javascript
                ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script type="text/javascript" src="./ui/js/libs/jquery/jquery-min.js"></script>
        <script type="text/javascript">
            function PositionErrorMessage(element, error)
            {
                var elementwidth = $(element).width();
                var errorwidth = $(error).width();
                var elementheight = $(element).height();
                var errorheight = $(error).height();
                var elementoffset = $(element).offset();
                var erroroffset = $(error).offset();
                var left = 10;
                var top = 0;
                if (error == "#termscheckbubble")
                {
                    left = 14;
                    top = 5;
                }
                if (typeof (elementoffset) != "undefined") {
                    $(error).offset({
                        top: elementoffset.top - errorheight - 18 - top,
                        left: (elementwidth - errorwidth) / 2 + elementoffset.left - left
                    });
                }
            }

            function validateEmail(email) {
                var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                return re.test(email);
            }

            $(document).ready(function() {
                $(".cancelPopup").toggleClass("hdn");
                $("body").on("keypress", "#username", function(event) {
                    var keycode = (event.keyCode ? event.keyCode : event.which);
                    keycode = parseInt(keycode);
                    if (keycode == 13) {
                        event.preventDefault();
                        $(this).blur();
                        $("#forgotButton").click();
                    }                   
                });
                $("body").on("click", "#forgotButton", function(event) {
                    event.preventDefault();
                    $('#forgotButton').attr("disabled", "true");
                    $('#alert-error').hide();

                    var email = $('#username').val();

                    if (!validateEmail(email))
                    {
                        $('#usernameerror').html('Enter a valid email address.');
                        $('#usernamebubble').removeClass("hdn");
                        $("#usernamediv").addClass('error');
                        PositionErrorMessage("#username", "#usernamebubble");
                        $('#forgotButton').removeAttr("disabled");
                        return false;
                    }

                    var formValues = {
                        email: email,
                    };

                    var URLToBeUsed;
                    URLToBeUsed = "service/api/resetpassword";
                    if (window.location.search.indexOf("type=advisor") != -1)
                    {
                        URLToBeUsed = "service/api/advisorresetpassword";
                    }

                    $.ajax({
                        url: URLToBeUsed,
                        type: 'POST',
                        dataType: "json",
                        data: formValues,
                        success: function(data) {
                            $('#forgotButton').removeAttr("disabled");
                            $("#forgotLinks").hide();
                            $("#emailGroup").hide();
                            $("#forgotInstructions").attr('style', 'margin:1em 0;padding:0px 10px;text-align:left');
                            $("#forgotInstructions").html("If this is a valid account, an email containing your password recovery link is on its way. If you do not receive an email within 10 minutes, check your spam folder first, then try again. If the issue persists, please <a href='mailto:support@flexscore.com' target='_blank'>contact us</a>.");
                        },
                        error: function(data) {
                            $('#usernameerror').html('Please try again later.');
                            $('#usernamebubble').removeClass("hdn");
                            $("#usernamediv").addClass('error');
                            PositionErrorMessage("#username", "#usernamebubble");
                        }
                    });
                    return false;

                });

            });

        </script>
    </body>
</html>